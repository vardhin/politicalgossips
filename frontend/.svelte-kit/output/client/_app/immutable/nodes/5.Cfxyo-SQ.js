import{t as m,a as p}from"../chunks/D7uXA1Ur.js";import{i as ye}from"../chunks/BUZb4uKt.js";import{m as he,a8 as N,a9 as _e,t as k,q as be,v as s,w as X,o as e,z as _,y as i,$ as xe,x as n,A as t,B as we}from"../chunks/C6NBa0eJ.js";import{h as ke,s as d,e as Z}from"../chunks/Bh918-OH.js";import{i as S}from"../chunks/BHvfjOCM.js";import{N as Ie,e as Pe,i as $e}from"../chunks/CCdTLTpf.js";import{a as H,P as Le}from"../chunks/BGlFHzz6.js";import{s as Ae,a as De}from"../chunks/QXJAqkbd.js";import{o as Ue}from"../chunks/HOlLVa_p.js";import{s as Ee}from"../chunks/eGLDC6Tn.js";const Be=()=>{const g=Ee;return{page:{subscribe:g.page.subscribe},navigating:{subscribe:g.navigating.subscribe},updated:g.updated}},Re={subscribe(g){return Be().page.subscribe(g)}};var Ce=m('<meta name="description" class="svelte-g46pyg">'),Fe=m('<div class="error-message glass-card svelte-g46pyg"><h2 class="svelte-g46pyg">Error</h2> <p class="svelte-g46pyg"> </p> <a href="/" class="btn-back svelte-g46pyg">Back to Homepage</a></div>'),Ge=m('<div class="loading-container svelte-g46pyg"><div class="loading-spinner svelte-g46pyg"></div> <p class="svelte-g46pyg">Loading article...</p></div>'),Ne=m(`<div class="error-message glass-card svelte-g46pyg"><h2 class="svelte-g46pyg">Article Not Found</h2> <p class="svelte-g46pyg">The article you're looking for doesn't exist or has been removed.</p> <a href="/" class="btn-back svelte-g46pyg">Back to Homepage</a></div>`),Se=m('<p class="svelte-g46pyg"> </p>'),He=m('<article class="article-content svelte-g46pyg"><div class="article-meta svelte-g46pyg"><span class="category svelte-g46pyg"> </span> <span class="date svelte-g46pyg"> </span></div> <h1 class="svelte-g46pyg"> </h1> <div class="article-image-container svelte-g46pyg"><img crossorigin="anonymous" class="svelte-g46pyg"></div> <div class="article-summary svelte-g46pyg"><p class="summary-text svelte-g46pyg"> </p></div> <div class="article-body svelte-g46pyg"></div> <div class="article-actions svelte-g46pyg"><a href="/" class="btn-back svelte-g46pyg">Back to Homepage</a> <div class="share-buttons svelte-g46pyg"><button class="btn-share svelte-g46pyg">Share</button></div></div></article>'),qe=m('<div class="container svelte-g46pyg"><!> <main class="svelte-g46pyg"><section class="article-section glass-panel svelte-g46pyg"><!></section></main> <footer class="glass-panel svelte-g46pyg"><div class="copyright svelte-g46pyg"> </div></footer></div>');function We(g,q){he(q,!1);const[ee,ae]=Ae(),b=()=>De(Re,"$page",ee),c=_(),T=_(),te=[{href:"/",label:"Home",active:!1},{href:"/category/general",label:"General",active:!1},{href:"/category/political",label:"Political",active:!1},{href:"/contact",label:"Contact",active:!1}];let r=_(null),u=_(!0),x=_(null);const j=Le;function se(a){return a?`${j}/image/${a}`:"https://placehold.co/800x400/eee/aaa?text=No+Image"}function re(a){return a?new Date(a).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):""}async function z(a){try{if(i(u,!0),i(x,null),!a)throw new Error("Invalid article ID");console.log(`Fetching article with ID: ${a}`);const l=await fetch(`${j}/articles/${a}`);if(!l.ok){const f=l.status;throw f===404?new Error("Article not found"):new Error(`Failed to fetch article: ${l.statusText||f}`)}const v=await l.json();return console.log("Received article data:",v),v}catch(l){return console.error("Error fetching article:",l),i(x,l.message||"Failed to load article"),null}finally{i(u,!1)}}let I=_(null);Ue(()=>{console.log("URL Search params:",b().url.searchParams.toString()),e(c)?(console.log(`Article ID from URL: ${e(c)}, slug: ${e(T)}`),i(I,e(c)),z(e(c)).then(a=>{i(r,a)})):(i(x,"Article ID is missing"),i(u,!1))}),N(()=>b(),()=>{i(c,b().url.searchParams.get("id"))}),N(()=>b(),()=>{i(T,b().url.searchParams.get("slug"))}),N(()=>(e(c),e(u),e(I)),()=>{e(c)&&!e(u)&&e(c)!==e(I)&&(console.log(`URL parameter changed, fetching article: ${e(c)}`),i(I,e(c)),z(e(c)).then(a=>{i(r,a)}))}),_e(),ye();var P=qe();ke(a=>{var l=Ce();k(()=>{xe.title=e(r)?e(r).title+" - Political Gossips":"Article - Political Gossips",H(l,"content",e(r)?e(r).summary:"Political news and analysis")}),p(a,l)});var M=s(P);Ie(M,{brand:"Political Gossips",links:te,sticky:!0});var $=n(M,2),Y=s($),le=s(Y);{var oe=a=>{var l=Fe(),v=n(s(l),2),f=s(v,!0);t(v),we(2),t(l),k(()=>d(f,e(x))),p(a,l)},ie=(a,l)=>{{var v=y=>{var L=Ge();p(y,L)},f=(y,L)=>{{var ne=h=>{var w=Ne();p(h,w)},ge=h=>{var w=He(),A=s(w),D=s(A),ve=s(D,!0);t(D);var O=n(D,2),pe=s(O,!0);t(O),t(A);var U=n(A,2),de=s(U,!0);t(U);var E=n(U,2),B=s(E);t(E);var R=n(E,2),Q=s(R),me=s(Q,!0);t(Q),t(R);var C=n(R,2);Pe(C,5,()=>e(r).article_text.split(`

`),$e,(o,F)=>{var G=Se(),fe=s(G,!0);t(G),k(()=>d(fe,e(F))),p(o,G)}),t(C);var V=n(C,2),W=n(s(V),2),ue=s(W);t(W),t(V),t(w),k((o,F)=>{d(ve,e(r).category),d(pe,o),d(de,e(r).title),H(B,"src",F),H(B,"alt",e(r).title),d(me,e(r).summary)},[()=>re(e(r).date),()=>se(e(r).articleId)],X),Z("error",B,o=>o.target.src="https://placehold.co/800x400/eee/aaa?text=No+Image"),Z("click",ue,()=>{if(navigator.share)navigator.share({title:e(r).title,text:e(r).summary,url:window.location.href}).catch(o=>console.error("Error sharing:",o));else{const o=document.createElement("input");document.body.appendChild(o),o.value=window.location.href,o.select(),document.execCommand("copy"),document.body.removeChild(o),alert("Link copied to clipboard!")}}),p(h,w)};S(y,h=>{e(r)?h(ge,!1):h(ne)},L)}};S(a,y=>{e(u)?y(v):y(f,!1)},l)}};S(le,a=>{e(x)?a(oe):a(ie,!1)})}t(Y),t($);var J=n($,2),K=s(J),ce=s(K);t(K),t(J),t(P),k(a=>d(ce,`Â© ${a??""} Political Gossips. All rights reserved.`),[()=>new Date().getFullYear()],X),p(g,P),be(),ae()}export{We as component};
